# nginx-docker-template
Шаблон для проекта docker + nginx + что-то еще

# Введение
## ***1. Доменное имя***
Получите доменное имя, например, на сайте [reg.ru](https://reg.ru).
## ***2. Арендуйте хостинг***
## ***3. Переадресация***
Свяжите __ip__-адресс вашего хостинга, где будет запускаться проект, с доменным именем. Чаще всего это можно сделать там же, где покупали доменное имя.

## ***4. Работа с проектом***
Чтобы запустить проект вам понадобиться __docker__ и __docker compose__. Как их установить для Uuntu рассказано [тут](https://docs.docker.com/engine/install/ubuntu/). Если вы запускаете проект на __windows__ сервере, то вам может понадобиться дополнительно установить ***CMake***, но к счатью на большинтсве __Linux__ серверов она работает уже из коробки.

### __4.1 Получение *ssl* сертификата__
Это первое что нужно сделать. Получать сертификат мы будем через __certbot__. Вам нужно в файле [.env](.env) задать переменные окружения по образцу:
* ***domain*** - ваше доменное именя, которое вы приобрели ранее на шаге 1;
* ***email*** - ваш почтовый адрес

Дальше выполните в консоли комманду:
```console
make ssl
```

Нужно подаждать 5-10 секунд. Чтобы удостовериться, что сертефикаты были получены выполните:
```console
make lcert
```
### __4.2 Запуск проекта с соединением по  *https*__
После того, как мы получили сертификаты и удостоверил, что они есть, осталось просто запустить наше основное приложение:
```console
make up
```

### __4.3 Логи *вебсервера*__
Иногда из-за ошибок в конфигурации вебсервер не запускаетя
и уходит в бесконечный цикл перезапуска. Такие ошибки бывают в пунктах 4.1 - 4.2. Чтобы посмотреть логи веб сервера выполните:
```console
make lweb
```

### __4.4 Перезапуск *вебсервера*__
Если вы изменили настройки сервера, то чтобы изменения пришли в силу, нужно перезапустить сервер:
```console
make web
```

### __4.5 Логи *certbot*__
Если произошли какие0либо ошибки при выдаче-обновлении сертификатов, то выполните:
```console
make lcert
```

### __4.6 *Прекратить* работу приложения__
Внимание: данная комманда удалит также все полученные ранее сертификаты.
```console
make down
```
